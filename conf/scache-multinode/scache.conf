scache.master.ip=127.0.0.1
scache.master.port=16388
scache.client.port=15678
scache.block.fetching.retry=5
scache.memory.offHeap.size=1024m

# Local multi-"host" simulation notes:
# - This config is intended for running multiple ScacheClient processes on a single machine
#   (bound to distinct loopback IPs like 127.0.0.2/127.0.0.3/...), one per simulated node.
# - Use pool IPC so Spark can write shuffle bytes directly into an mmap'ed region (IpcPoolSlice).
# - Each simulated node must use a distinct local pool file (SCache auto-suffixes the pool path
#   with the loopback IP when running in this multinode simulation).
# - The shared CXL pool is a single file (fsdax-like path) allocated by the master and used for
#   cross-node shuffle blocks. Reduce hosts can read directly from this shared pool without
#   client-to-client TCP transfers.

scache.daemon.putBlock.async=false

scache.daemon.ipc.backend=pool
scache.daemon.ipc.mode=local

# Pool IPC (Spark writes shuffle bytes directly into the pool slice).
scache.daemon.ipc.pool.path=/dev/shm/scache-ipc.pool
scache.daemon.ipc.pool.size=4096m
# Blocks won't cross a chunk boundary; keep this >= max expected shuffle partition size (<= 2g).
scache.daemon.ipc.pool.mapChunk=2048m
scache.daemon.ipc.pool.align=4096
# Keep zero-copy off for now so pool slices are released after the client ingests them.
scache.daemon.ipc.pool.zeroCopy.put=false

# Shared CXL (fsdax-like) pool for cross-node shuffle (master-managed offsets).
scache.storage.cxl.shared.enabled=true
scache.storage.cxl.shared.pool.path=/dev/shm/scache-cxl.pool
scache.storage.cxl.shared.pool.size=32768m
scache.storage.cxl.shared.pool.align=4096

# Disable client-to-client network fetch; cross-node shuffle must be served from shared CXL pool.
scache.storage.network.enabled=false

# IPC dirs (used for non-pool paths / fallbacks).
scache.daemon.ipc.dir.local=/dev/shm/scache-ipc/put
scache.daemon.ipc.dir.get=/dev/shm/scache-ipc/get
scache.daemon.ipc.dir.remote=/dev/shm/scache-ipc/put

scache.daemon.ipc.prepare=true
scache.daemon.ipc.pretouch=true
scache.daemon.ipc.pretouch.pageSize=4096
